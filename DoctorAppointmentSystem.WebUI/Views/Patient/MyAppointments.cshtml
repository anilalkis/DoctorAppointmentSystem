@model Patient

@{
    Layout = "_PatientLayout";
}



@foreach(var appointment in @Model.Appointments)
{
    if (appointment.DateTime > DateTime.Now)
    {
        <div class="card alert alert-secondary">
            <div class="card-header fw-bold d-flex justify-content-between">
                <span>
                    @appointment.DateTime.ToShortDateString() - @appointment.DateTime.DayOfWeek.ToString()
                </span>
                <span>
                    @if (appointment.IsApproved == State.Approved)
                    {
                        <span class="badge bg-success rounded-3 fw-semibold">Approved</span>
                    }
                    else if (appointment.IsApproved == State.NotApproved)
                    {
                        <span class="badge bg-danger rounded-3 fw-semibold">Not Approved</span>
                    }
                    else if (appointment.IsApproved == State.Waiting)
                    {
                        <span class="badge bg-warning rounded-3 fw-semibold">Waiting</span>
                    }
                </span>
            </div>
            <div class="card-body">
                <p class="mb-0">Booking Date: ###</p>
                <h4 class="card-title fw-semibold my-4">@appointment.Doctor.FullName</h4>
                <p class="mb-0"><small>Sheduled Date: @appointment.DateTime.ToShortDateString()</small></p>
                <p class="mb-0"><small>Sheduled Time:</small> <b>@appointment.DateTime.ToShortTimeString()</b></p>
                <form asp-controller="Patient" asp-action="MyAppointments" method="post">
                    <input type="hidden" name="appointmentId" value="@appointment.AppointmentId" />
                    <button type="submit" class="btn btn-danger w-100 my-2">Cancel Booking</button>
                </form>
            </div>
        </div>
    }
}
